# 레지스터 (Register)

## 핵심 인사이트 (3줄 요약)
> CPU 내부의 **가장 빠른 메모리**. 명령어 실행에 필요한 데이터를 일시 저장한다. 범용, 특수, 세그먼트 레지스터 등으로 분류된다.

## 1. 개념
레지스터(Register)는 **CPU 내부에 있는 초고속 임시 저장소**다. 메모리 계층에서 가장 빠르고 작은 저장 공간이다.

> 비유: "요리사의 앞치마 주머니" - 바로 쓸 것만 넣어둠

## 2. 메모리 계층에서의 위치

```
┌─────────────────────────────────┐
│         레지스터                │ ← 가장 빠름, 가장 작음
│         (수백 바이트)            │
├─────────────────────────────────┤
│         L1 캐시                 │
│         (수십 KB)               │
├─────────────────────────────────┤
│         L2/L3 캐시              │
│         (수 MB)                 │
├─────────────────────────────────┤
│         RAM                     │
│         (수 GB)                 │
├─────────────────────────────────┤
│         SSD/HDD                 │ ← 가장 느림, 가장 큼
│         (수 TB)                 │
└─────────────────────────────────┘
```

## 3. 레지스터 종류

### 범용 레지스터
```
x86-64:
RAX, RBX, RCX, RDX  (데이터)
RSI, RDI            (소스/목적지)
R8-R15              (확장)

ARM:
R0-R12              (범용)
```

### 특수 레지스터
```
PC (Program Counter): 다음 명령어 주소
SP (Stack Pointer): 스택 최상단
LR (Link Register): 반환 주소
FP (Frame Pointer): 스택 프레임 기준
```

### 상태 레지스터
```
Flags/PSR:
┌───┬───┬───┬───┬───┐
│ N │ Z │ C │ V │...│
└───┴───┴───┴───┴───┘
N: Negative (음수)
Z: Zero (0)
C: Carry (자리올림)
V: Overflow (오버플로우)
```

## 4. 레지스터 크기

| 아키텍처 | 레지스터 크기 | 범용 레지스터 수 |
|----------|---------------|------------------|
| 8-bit | 8 bits | few |
| 16-bit | 16 bits | 8 |
| 32-bit | 32 bits | 8-16 |
| 64-bit | 64 bits | 16-32 |

## 5. 레지스터 활용 예시

```
ADD R1, R2, R3  ; R1 = R2 + R3

동작:
1. R2 값 읽기
2. R3 값 읽기
3. ALU에서 덧셈
4. 결과를 R1에 저장

→ 모든 데이터가 레지스터를 거침
```

## 6. 레지스터 vs 메모리

| 항목 | 레지스터 | RAM |
|------|----------|-----|
| 속도 | 1 클럭 | 100+ 클럭 |
| 크기 | 수십 바이트 | 수 GB |
| 접근 | 직접 | 주소 필요 |
| 개수 | 제한적 | 많음 |

## 7. 레지스터 윈도우

```
SPARC/RISC-V:
- 여러 레지스터 세트
- 함수 호출 시 윈도우 전환
- 메모리 접근 최소화

글로벌: R0-R7
윈도우: R8-R31 (중첩 가능)
```

## 8. 장단점

| 장점 | 단점 |
|-----|------|
| 가장 빠름 | 개수 제한 |
| 직접 접근 | 컴파일러 최적화 필요 |
| 저전력 | 용량 작음 |

## 9. 코드 예시

```asm
; x86 어셈블리
MOV EAX, 10      ; EAX = 10
MOV EBX, 20      ; EBX = 20
ADD EAX, EBX     ; EAX = EAX + EBX = 30
PUSH EAX         ; 스택에 저장
```

## 10. 실무에선? (기술사적 판단)
- **컴파일러**: 레지스터 할당 최적화
- **성능**: 레지스터 많을수록 좋음
- **RISC**: 많은 레지스터 (32개)
- **CISC**: 적은 레지스터 (16개)

## 11. 관련 개념
- 레지스터 파일
- 레지스터 할당
- ABI (Application Binary Interface)

---

## 어린이를 위한 종합 설명

**레지스터는 "요리사의 주머니"야!**

### 메모리 비교
```
레지스터: 앞치마 주머니 👔 (바로 꺼내요!)
캐시: 조리대 서랍 🗄️ (조금 걸어요)
RAM: 창고 🏭 (멀리 있어요)
SSD: 다른 건물 🏢 (더 멀어요!)
```

### 주요 레지스터
```
PC: "다음에 뭘 해?" 📋
SP: "스택 어디까지 쌓았어?" 📚
R0~R15: "계산용 종이" 📝
Flags: "계산 결과 어땠어?" ✅❌
```

### 요리 비유
```
레지스터 = 요리사의 양손
RAM = 냉장고

양손(레지스터)에 재료를 올려야 요리할 수 있어요!
냉장고(RAM)에서 재료를 꺼내서 손에 올려요! 🍳
```

**비밀**: 컴파일러는 어떤 데이터를 레지스터에 둘지 똑똑하게 정해요! 🧠
