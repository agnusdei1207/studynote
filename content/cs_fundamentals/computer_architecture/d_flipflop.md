# D 플립플롭 (D Flip-Flop)

## 핵심 인사이트 (3줄 요약)
> 클럭 엣지에서 **데이터(D)를 그대로 저장**하는 가장 널리 쓰이는 플립플롭. RS 플립플롭의 금지 상태 문제를 해결했으며, 현대 디지털 회로의 **표준 메모리 소자**다. 파이프라인, 레지스터, 카운터의 기본이다.

## 1. 개념
D 플립플롭(Data 또는 Delay Flip-Flop)은 **클럭 엣지에서 D 입력을 Q 출력으로 전달**한다. "데이터를 한 클럭 지연시키는" 역할을 한다.

> 비유: "새벽 6시에 문을 여는 창고" - 6시가 되면 들어온 물건을 저장

## 2. 진리표 (상승 엣지)

| CLK | D | Q(n+1) |
|-----|---|--------|
| ↑ | 0 | 0 |
| ↑ | 1 | 1 |
| 기타 | X | Q(n) |

## 3. 논리 기호

```
         ┌───┐
    D ───┤   │
         │ D ├─── Q
  CLK ───┤>  │
         └───┘

>는 클럭 입력, 작은 삼각형은 엣지 트리거 표시
```

## 4. 회로 구현

```
D 플립플롭 = 마스터-슬레이브 래치 2개

마스터 래치: CLK=1일 때 D 입력 받음
슬레이브 래치: CLK=0→1 전이 시 마스터 값 전달

또는:
D 플립플롭 = JK 플립플롭에서 J=D, K=D̄
```

## 5. 타이밍 특성

| 파라미터 | 설명 |
|---------|------|
| Setup Time | 클럭 엣지 전에 D가 안정해야 하는 시간 |
| Hold Time | 클럭 엣지 후에 D가 유지되어야 하는 시간 |
| Clock-to-Q | 클럭 엣지 후 Q가 변경되는 시간 |

## 6. 장단점

| 장점 | 단점 |
|-----|------|
| 금지 상태 없음 | 입력이 1개뿐이라 기능 제한 |
| 사용이 간편함 | 토글 기능 없음 |
| 가장 널리 사용됨 | - |
| 설계가 쉬움 | - |

## 7. 활용 사례

1. **레지스터**: D 플립플롭 N개로 N비트 레지스터 구성
2. **파이프라인**: CPU 파이프라인 스테이지 간 데이터 전달
3. **시프트 레지스터**: 직렬 데이터를 병렬로 변환
4. **카운터**: T 플립플롭 대체 (D를 Q̄에 연결)

## 8. 코드 예시

```verilog
// 기본 D 플립플롭
module d_flipflop(
    input clk,
    input d,
    output reg q
);
    always @(posedge clk) begin
        q <= d;
    end
endmodule

// 비동기 리셋 추가
module d_ff_reset(
    input clk,
    input rst_n,
    input d,
    output reg q
);
    always @(posedge clk or negedge rst_n) begin
        if (!rst_n)
            q <= 0;
        else
            q <= d;
    end
endmodule
```

## 9. D 플립플롭으로 T 플립플롭 만들기

```
D = Q̄ XOR T

T=0: D = Q̄ XOR 0 = Q̄ (유지)
T=1: D = Q̄ XOR 1 = Q (토글)
```

## 10. 실무에선? (기술사적 판단)
- **ASIC/FPGA**: D 플립플롭이 표준 셀
- **타이밍 분석**: Setup/Hold 위반이 핵심 이슈
- **메타스테이블리티**: 클럭 도메인 간 전이 시 주의

## 11. 관련 개념
- Setup Time, Hold Time
- 래치 vs 플립플롭
- 메타스테이블리티

---

## 어린이를 위한 종합 설명

**D 플립플롭은 "딱 한 번만 복사하는 기계"야!**

선생님이 "자, 지금부터 숫자를 기억하세요!"라고 외칠 때, D 플립플롭은 그 숫자를 딱! 기억해요.

```
D(입력) = 5
선생님: "지금!" (CLK ↑)
Q(출력) = 5 (기억했어요!)

D가 그 다음 7로 바뀌어도...
Q = 5 (아직 5를 기억 중!)
```

**비밀**: D는 "Data(데이터)" 또는 "Delay(지연)"를 의미해요. 한 클럭 동안 데이터를 지연시켜서 저장하는 거예요!

**진짜 비밀**: 컴퓨터 안에는 D 플립플롭이 수십억 개가 있어요! 모든 레지스터가 이걸로 만들어져요!
