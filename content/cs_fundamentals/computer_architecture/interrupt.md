# μΈν„°λ½νΈ (Interrupt)

## ν•µμ‹¬ μΈμ‚¬μ΄νΈ (3μ¤„ μ”μ•½)
> CPUκ°€ **μ™Έλ¶€/λ‚΄λ¶€ μ΄λ²¤νΈμ— λΉ„λ™κΈ°μ μΌλ΅ μ‘λ‹µ**ν•λ” λ©”μ»¤λ‹μ¦. ν΄λ§(Polling) λ€λΉ„ ν¨μ¨μ μ΄λ©°, μ…μ¶λ ¥, μμ™Έ, νƒ€μ΄λ¨Έ λ“±μ„ μ²λ¦¬ν•λ‹¤. μΈν„°λ½νΈ λ²΅ν„°μ™€ μ„λΉ„μ¤ λ£¨ν‹΄(ISR)μΌλ΅ κµ¬μ„±λλ‹¤.

## 1. κ°λ…
μΈν„°λ½νΈ(Interrupt)λ” **CPUμ—κ² κΈ‰ν• μΌμ΄ μƒκ²Όμμ„ μ•λ¦¬κ³  μ²λ¦¬λ¥Ό μ”μ²­**ν•λ” μ‹ νΈλ‹¤. CPUλ” ν•λ μΌμ„ λ©μ¶”κ³  μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR)μ„ μ‹¤ν–‰ν•λ‹¤.

> λΉ„μ : "μμ—… μ¤‘ κµμ‹¤ λΉ„μƒλ²¨" - ν•λ μΌμ„ λ©μ¶”κ³  λ€ν”Ό

## 2. μΈν„°λ½νΈ μΆ…λ¥

| μΆ…λ¥ | μ›μΈ | μμ‹ |
|------|------|------|
| ν•λ“μ›¨μ–΄ | μ™Έλ¶€ μ¥μΉ | ν‚¤λ³΄λ“, νƒ€μ΄λ¨Έ |
| μ†ν”„νΈμ›¨μ–΄ | ν”„λ΅κ·Έλ¨ | μ‹μ¤ν… μ½ |
| μμ™Έ | μ‹¤ν–‰ μ¤λ¥ | 0μΌλ΅ λ‚λ„κΈ° |
| νΈλ© | μλ„μ  | λ””λ²„κΉ… |

## 3. μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ •

```
1. μΈν„°λ½νΈ μ”μ²­ (IRQ)
   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   β”‚  ν‚¤λ³΄λ“  β”‚ β”€β”€β”€β”€ μΈν„°λ½νΈ μ‹ νΈ β”€β”€β”€β”€β†’
   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

2. CPU ν„μ¬ μƒνƒ μ €μ¥
   PC, λ μ§€μ¤ν„° β†’ μ¤νƒ

3. μΈν„°λ½νΈ λ²΅ν„° ν™•μΈ
   λ²΅ν„° ν…μ΄λΈ”μ—μ„ ISR μ£Όμ† μ°ΎκΈ°

4. ISR μ‹¤ν–‰
   μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ μν–‰

5. μƒνƒ λ³µμ›
   μ¤νƒ β†’ PC, λ μ§€μ¤ν„°

6. μ›λ μ‘μ—… μ¬κ°
```

## 4. μΈν„°λ½νΈ vs ν΄λ§

```
ν΄λ§ (Polling):
while(1) {
    if (ν‚¤λ³΄λ“_μ…λ ¥_μμ()) {
        μ²λ¦¬();
    }
    if (λ§μ°μ¤_μ…λ ¥_μμ()) {
        μ²λ¦¬();
    }
    // κ³„μ† ν™•μΈ...
}

β†’ CPUκ°€ κ³„μ† ν™•μΈν•΄μ•Ό ν•¨ (λΉ„ν¨μ¨)

μΈν„°λ½νΈ:
// λ©”μΈ ν”„λ΅κ·Έλ¨
while(1) {
    // λ‹¤λ¥Έ μΌ ν•¨
}

// μΈν„°λ½νΈ λ°μƒ μ‹ μλ™ νΈμ¶
ISR_ν‚¤λ³΄λ“() {
    ν‚¤λ³΄λ“_μ²λ¦¬();
}

β†’ μ΄λ²¤νΈ λ°μƒ μ‹μ—λ§ CPU μ‚¬μ© (ν¨μ¨)
```

## 5. μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ λ²νΈ   β”‚ ISR μ£Όμ†         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚   0    β”‚ 0x0000 (λ¦¬μ…‹)   β”‚
β”‚   1    β”‚ 0x0004 (NMI)    β”‚
β”‚   2    β”‚ 0x0008 (HardFault)β”‚
β”‚  ...   β”‚ ...             β”‚
β”‚  100   β”‚ 0x0190 (UART)   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

CPUλ” μΈν„°λ½νΈ λ²νΈλ΅ ISR μ£Όμ†λ¥Ό μ°Ύμ
```

## 6. μΈν„°λ½νΈ μ°μ„ μμ„

```
μ°μ„ μμ„ μμ‹:
1. λ¦¬μ…‹ (μµκ³ )
2. NMI (Non-Maskable Interrupt)
3. ν•λ“ ν΄νΈ
4. νƒ€μ΄λ¨Έ
5. UART
6. GPIO (μµμ €)

λ†’μ€ μ°μ„ μμ„ μΈν„°λ½νΈκ°€ λ‚®μ€ κ²ƒμ„ μ„ μ  κ°€λ¥
β†’ μ¤‘μ²© μΈν„°λ½νΈ (Nested Interrupt)
```

## 7. ISR μ‘μ„± μμ‹

```c
// ARM Cortex-M μΈν„°λ½νΈ
void USART1_IRQHandler(void) {
    if (USART1->SR & USART_SR_RXNE) {
        // μμ‹  λ°μ΄ν„° μμ
        char data = USART1->DR;
        process_data(data);
    }
}

// μΈν„°λ½νΈ ν™μ„±ν™”
void enable_uart_interrupt(void) {
    USART1->CR1 |= USART_CR1_RXNEIE;  // μμ‹  μΈν„°λ½νΈ ν™μ„±ν™”
    NVIC_EnableIRQ(USART1_IRQn);      // NVICμ—μ„ ν™μ„±ν™”
}
```

## 8. μΈν„°λ½νΈ μ§€μ—° (Latency)

```
μΈν„°λ½νΈ μ§€μ—° μ‹κ°„:
- ν•λ“μ›¨μ–΄ μ§€μ—°: μ‹ νΈ μ „λ‹¬ μ‹κ°„
- μ†ν”„νΈμ›¨μ–΄ μ§€μ—°: ν„μ¬ λ…λ Ήμ–΄ μ™„λ£ λ€κΈ°
- ISR μ§„μ… μ‹κ°„: μ»¨ν…μ¤νΈ μ €μ¥

μ‹¤μ‹κ°„ μ‹μ¤ν…μ—μ„ μ¤‘μ”ν• μ§€ν‘
```

## 9. μ¥λ‹¨μ 

| μ¥μ  | λ‹¨μ  |
|-----|------|
| CPU ν¨μ¨μ„± | μ¤λ²„ν—¤λ“ |
| μ‹¤μ‹κ°„ μ‘λ‹µ | λ³µμ΅ν• μ„¤κ³„ |
| ν΄λ§ λ€λΉ„ μ €μ „λ ¥ | μ°μ„ μμ„ κ΄€λ¦¬ |

## 10. μ‹¤λ¬΄μ—μ„ ? (κΈ°μ μ‚¬μ  νλ‹¨)
- **RTOS**: μΈν„°λ½νΈ μ§€μ—°μ΄ μ‹¤μ‹κ°„μ„± κ²°μ •
- **μ„λ² λ””λ“**: λ¨λ“  I/Oλ¥Ό μΈν„°λ½νΈλ΅ μ²λ¦¬
- **OS**: μ‹μ¤ν… μ½, μ¤μΌ€μ¤„λ§μ— μΈν„°λ½νΈ ν™μ©
- **μ„±λ¥**: μΈν„°λ½νΈ λΉλ„κ°€ μ„±λ¥ μν–¥

## 11. κ΄€λ ¨ κ°λ…
- ν΄λ§ (Polling)
- ISR (Interrupt Service Routine)
- NVIC (Nested Vectored Interrupt Controller)

---

## μ–΄λ¦°μ΄λ¥Ό μ„ν• μΆ…ν•© μ„¤λ…

**μΈν„°λ½νΈλ” "κµμ‹¤ λΉ„μƒλ²¨"μ΄μ•Ό!**

### ν΄λ§ (μ„ μƒλ‹μ΄ κ³„μ† ν™•μΈ)
```
μ„ μƒλ‹: "μ² μ, ν™”μ¥μ‹¤ κ°λ?"
μ„ μƒλ‹: "μν¬, ν™”μ¥μ‹¤ κ°λ?"
μ„ μƒλ‹: "λ―Όμ, ν™”μ¥μ‹¤ κ°λ?"
... (κ³„μ† λ¬Όμ–΄λ΄μ•Ό ν•΄μ” π“)
```

### μΈν„°λ½νΈ (μ† λ“¤λ©΄ λ°”λ΅ ν™•μΈ)
```
ν•™μƒ: μ† λ“¤κΈ°! π™‹
μ„ μƒλ‹: "λ„¤, ν™”μ¥μ‹¤ κ°€μ„Έμ”!"

β†’ ν•„μ”ν•  λ•λ§ μ‹ νΈ! (ν¨μ¨μ ! β¨)
```

### μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ •
```
1. π™‹ μ† λ“¤κΈ° (μΈν„°λ½νΈ μ”μ²­)
2. π“ ν•λ μΌ μ €μ¥ (μƒνƒ μ €μ¥)
3. π» ν™”μ¥μ‹¤ κ°€κΈ° (ISR μ‹¤ν–‰)
4. π“ ν•λ μΌ κ³„μ† (μƒνƒ λ³µμ›)
```

### μ°μ„ μμ„
```
π”¥ λ¶μ΄ λ‚¬μ–΄μ”! (μµκ³  μ°μ„ μμ„)
π¤Ά λ°°κ°€ μ•„νμ”! (λ†’μ)
π» ν™”μ¥μ‹¤ κ°€κ³  μ‹¶μ–΄μ”! (λ³΄ν†µ)
π’§ λ¬Ό λ§μ‹κ³  μ‹¶μ–΄μ”! (λ‚®μ)
```

**λΉ„λ°€**: μ»΄ν“¨ν„°λ” ν‚¤λ³΄λ“, λ§μ°μ¤, νƒ€μ΄λ¨Έ... λ¨λ“  κ±Έ μΈν„°λ½νΈλ΅ μ²λ¦¬ν•΄μ”! κ·Έλμ„ CPUκ°€ λ†€μ§€ μ•κ³  μΌν•  μ μμ–΄μ”! β¨οΈπ–±οΈβ°
