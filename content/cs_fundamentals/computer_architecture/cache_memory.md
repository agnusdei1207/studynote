+++
title = "캐시 메모리 (Cache Memory)"
date = 2025-02-27
+++

# 캐시 메모리 (Cache Memory)

## 핵심 인사이트 (3줄 요약)
> CPU와 주기억장치 사이의 **속도 차이를 완화**하는 고속 메모리. 지역성(Locality) 원리를 활용해 자주 사용하는 데이터를 저장한다. L1→L2→L3 계층 구조로 구성된다.

## 1. 개념
캐시 메모리는 **CPU와 RAM 사이에 위치한 고속 버퍼 메모리**다. 자주 사용하는 데이터를 미리 저장하여 메모리 접근 시간을 줄인다.

> 비유: "책상 서랍" - 자주 쓰는 물건을 가까이 둠

## 2. 등장 배경
- CPU 속도: 수 GHz (매우 빠름)
- RAM 속도: 수백 MHz (상대적으로 느림)
- → 속도 차이로 CPU가 대기하는 병목 발생
- → 캐시로 병목 완화

## 3. 캐시 계층 구조

```
CPU ─── L1 Cache ─── L2 Cache ─── L3 Cache ─── RAM
       (최빠름)      (빠름)        (보통)       (느림)
       (작음)        (중간)        (큼)         (가장 큼)

일반적 크기:
- L1: 32~64 KB (코어별)
- L2: 256 KB~1 MB (코어별)
- L3: 8~64 MB (공유)
```

## 4. 지역성 (Locality)

| 지역성 | 설명 | 예시 |
|--------|------|------|
| 시간 지역성 | 최근 접근 데이터 재접근 | 루프 변수 |
| 공간 지역성 | 인접 데이터 접근 | 배열 순차 접근 |

## 5. 캐시 동작

```
데이터 요청:
1. L1 확인 → Hit: 반환
2. L2 확인 → Hit: 반환 + L1에 복사
3. L3 확인 → Hit: 반환 + 상위 캐시 복사
4. RAM 접근 → 반환 + 캐시에 저장

Hit: 캐시에서 찾음 (빠름)
Miss: 캐시에 없음 (느림)
```

## 6. 캐시 성능 지표

```
Hit Rate = Hit 횟수 / 전체 접근 횟수
Miss Rate = 1 - Hit Rate

AMAT (Average Memory Access Time):
= Hit Time + Miss Rate × Miss Penalty

예시:
- L1 Hit Rate: 95%, Hit Time: 1 cycle
- L2 Hit Rate: 90%, Hit Time: 10 cycles
- RAM: 100 cycles

AMAT = 1 + 0.05 × (10 + 0.1 × 100)
     = 1 + 0.05 × 20
     = 2 cycles
```

## 7. 캐시 매핑 방식

| 방식 | 특징 | 장단점 |
|------|------|--------|
| Direct Mapped | 1:1 매핑 | 빠름, 충돌 많음 |
| Fully Associative | 자유 배치 | 느림, 충돌 없음 |
| Set Associative | N-way | 균형 |

## 8. 교체 알고리즘

```
캐시 Miss 시 교체 대상 선정:
- LRU (Least Recently Used): 가장 오래 안 쓴 것
- FIFO: 먼저 들어온 것
- Random: 무작위
- LFU (Least Frequently Used): 적게 쓴 것
```

## 9. 장단점

| 장점 | 단점 |
|-----|------|
| 메모리 접근 가속 | 추가 비용 |
| 시스템 성능 향상 | 일관성 관리 복잡 |
| 전력 효율 | 면적 증가 |

## 10. 실무에선? (기술사적 판단)
- **CPU 설계**: 캐시 크기가 성능 결정
- **멀티코어**: 캐시 일관성(MESI) 핵심
- **프로그래밍**: 캐시 친화적 코드 작성 필요
- **벤치마크**: 캐시 미스가 병목

## 11. 관련 개념
- 지역성 (Locality)
- 캐시 일관성 (Cache Coherence)
- MESI 프로토콜

---

## 어린이를 위한 종합 설명

**캐시는 "친구의 책상"이야!**

숙제할 때:
- 내 책상(RAM): 멀리 있어요
- 친구 책상(캐시): 옆에 있어요!

자주 쓰는 교과서를 친구 책상에 두면, 매번 내 자리로 안 가도 돼요!

```
1단계 캐시(L1): 바로 옆 친구 🏃
2단계 캐시(L2): 앞자리 친구 🚶
3단계 캐시(L3): 교실 앞 친구
RAM: 도서관 📚
```

**지역성 비밀**:
- **시간**: 어제 본 책은 오늘도 봐요!
- **공간**: 국어책 10쪽을 보면 11쪽도 봐요!

그래서 캐시는 "이거 곧 또 쓰겠네?" 하고 미리 준비해요! 📖
