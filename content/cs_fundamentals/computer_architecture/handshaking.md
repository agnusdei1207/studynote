# 핸드쉐이킹 (Handshaking)

## 핵심 인사이트 (3줄 요약)
> 두 장치 간 **통신 준비를 확인**하는 프로토콜. 송신자와 수신자가 서로 준비되었음을 확인한 후 데이터 전송을 시작한다. 비동기 통신에서 데이터 손실을 방지한다.

## 1. 개념
핸드쉐이킹(Handshaking)은 **두 장치가 통신하기 전 서로 준비되었음을 확인**하는 절차다. 신호를 주고받으며 동기화한다.

> 비유: "전화 통화" - "여보세요?" "네, 들려요?" 후 대화 시작

## 2. 기본 핸드쉐이킹

```
장치 A (송신)          장치 B (수신)
     │                     │
     │───── Request ──────→│ "데이터 보낼게!"
     │                     │
     │←──── Acknowledge ───│ "준비됐어!"
     │                     │
     │────── Data ────────→│ (데이터 전송)
     │                     │
     │←──── Complete ──────│ "받았어!"
```

## 3. 하드웨어 핸드쉐이킹

```
병렬 포트 (Centronics) 예시:

송신측:              수신측:
┌─────┐              ┌─────┐
│     │── Strobe ───→│     │
│  A  │              │  B  │
│     │←── Ack ──────│     │
│     │── Data ─────→│     │
└─────┘              └─────┘

1. A가 Strobe 신호 (데이터 준비됨)
2. B가 데이터 읽고 Ack 신호
3. A가 다음 데이터 준비
```

## 4. 소프트웨어 핸드쉐이킹

```
XON/XOFF 프로토콜:

송신측                수신측
  │                     │
  │────── Data ────────→│
  │────── Data ────────→│
  │                     │ (버퍼 거의 참)
  │←───── XOFF ─────────│ "잠깐 멈춰!"
  │   (전송 중지)        │
  │                     │ (버퍼 처리)
  │←───── XON ──────────│ "다시 보내!"
  │────── Data ────────→│
```

## 5. I2C 핸드쉐이킹

```
I2C 통신:

Master              Slave
  │                   │
  │─── Start ─────────→
  │─── Address ───────→
  │←── ACK ────────────│ (슬레이브 있음)
  │─── Data ──────────→
  │←── ACK ────────────│
  │─── Stop ──────────→

ACK = Acknowledge (Low)
NACK = Not Acknowledge (High)
```

## 6. TCP 3-way 핸드쉐이크

```
네트워크 연결:

Client              Server
  │                   │
  │─── SYN ──────────→│ (연결 요청)
  │                   │
  │←── SYN+ACK ───────│ (요청 수락 + 연결 요청)
  │                   │
  │─── ACK ──────────→│ (수락 확인)
  │                   │
  │═══ 연결 완료 ═════│
```

## 7. 핸드쉐이킹 vs 폴링

| 특징 | 핸드쉐이킹 | 폴링 |
|------|----------|------|
| 동기화 | 신호 기반 | 주기적 확인 |
| 효율 | 높음 | 낮음 |
| 복잡도 | 높음 | 낮음 |
| 지연 | 낮음 | 높음 |

## 8. 장단점

| 장점 | 단점 |
|-----|------|
| 신뢰성 높음 | 오버헤드 |
| 동기화 보장 | 추가 신호선 필요 |
| 흐름 제어 가능 | 구현 복잡 |

## 9. 실무에선? (기술사적 판단)
- **임베디드**: GPIO, UART 핸드쉐이킹
- **네트워크**: TCP, TLS 핸드쉐이크
- **버스**: I2C, SPI Acknowledge
- **USB**: 열거(Enumeration) 과정

## 10. 관련 개념
- ACK/NACK
- 프로토콜
- 동기/비동기 통신

---

## 어린이를 위한 종합 설명

**핸드쉐이킹은 "악수"야!**

### 통화 전 확인
```
A: "들려요?" 📞
B: "네, 들려요!" 📞
A: "이제 이야기할게요!"

→ 서로 준비됐는지 확인하고 시작!
```

### 데이터 전송 비유
```
A: "사과 보낼게!" (Request) 🍎
B: "준비됐어!" (Acknowledge) ✋
A: [사과 전송]
B: "받았어!" (Complete) ✅
```

### 버퍼가 찼을 때
```
A: [계속 보내려 함]
B: "잠깐! 그만!" (XOFF) ✋
... (처리 중) ...
B: "이제 다시 보내!" (XON) 👍
```

**비밀**: 핸드쉐이킹 없이 그냥 보내면, 수신자가 준비 안 됐을 때 데이터를 잃어버릴 수 있어요! 🤝
