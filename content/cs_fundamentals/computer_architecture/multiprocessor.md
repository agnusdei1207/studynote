# 다중 처리기 (Multiprocessor)

## 핵심 인사이트 (3줄 요약)
> **여러 개의 CPU가 하나의 시스템에서 병렬로 작업**을 처리하는 구조. SMP(대칭형), AMP(비대칭형)으로 나뉜다. 캐시 일관성과 인터커넥트가 핵심 기술이다.

## 1. 개념
다중 처리기(Multiprocessor)는 **두 개 이상의 CPU가 메모리를 공유**하며 병렬로 작업을 처리하는 컴퓨터 시스템이다.

> 비유: "여러 요리사가 하나의 주방에서 요리" - 분업으로 빠르게 처리

## 2. 다중 처리기 분류

```
다중 처리기
├── SMP (Symmetric Multiprocessing)
│   └── 모든 CPU가 동등한 권한
└── AMP (Asymmetric Multiprocessing)
    └── 마스터-슬레이브 구조
```

## 3. SMP 구조

```
┌─────────────────────────────────┐
│          공유 메모리             │
└───────────┬─────────────────────┘
            │
    ┌───────┼───────┬───────┐
    │       │       │       │
┌───┴───┐┌───┴───┐┌───┴───┐┌───┴───┐
│ CPU 0 ││ CPU 1 ││ CPU 2 ││ CPU 3 │
│ 캐시  ││ 캐시  ││ 캐시  ││ 캐시  │
└───────┘└───────┘└───────┘└───────┘

특징:
- 모든 CPU가 동일
- 하나의 OS가 모든 CPU 관리
- 확장성 좋음
```

## 4. 캐시 일관성 (Cache Coherence)

```
문제: 여러 CPU 캐시의 데이터 불일치

CPU 0: 캐시에 X=10 저장
CPU 1: 캐시에 X=20 저장 → 어느 게 맞음?

해결: MESI 프로토콜

상태:
- Modified: 수정됨, 다른 캐시에 없음
- Exclusive: 혼자 소유, 수정 안 됨
- Shared: 여러 캐시가 공유
- Invalid: 무효
```

## 5. 인터커넥트

```
CPU 간 통신 방식:

1. 공유 버스
   - 간단, 병목

2. 크로스바
   - 모든 쌍 연결, 비용 높음

3. 메시 네트워크
   - 확장성 좋음, 지연 있음
```

## 6. 멀티코어 vs 멀티프로세서

| 항목 | 멀티코어 | 멀티프로세서 |
|------|----------|-------------|
| 위치 | 한 칩 안 | 여러 칩 |
| 캐시 | L3 공유 | 별도 |
| 통신 | 빠름 | 느림 |
| 비용 | 낮음 | 높음 |

## 7. 장단점

| 장점 | 단점 |
|-----|------|
| 높은 처리량 | 캐시 일관성 오버헤드 |
| 확장성 | 복잡한 소프트웨어 |
| 안정성 | 전력 소모 |

## 8. 실무에선? (기술사적 판단)
- **서버**: 64~128코어 SMP
- **데이터센터**: NUMA 구조
- **HPC**: 대규모 클러스터
- **클라우드**: 가상화로 리소스 공유

## 9. 관련 개념
- SMP, AMP
- 캐시 일관성
- NUMA

---

## 어린이를 위한 종합 설명

**다중 처리기는 "여러 요리사 주방"이야!**

### SMP (대칭형)
```
요리사 4명이 같은 주방에서:
- 같은 냉장고 사용
- 서로 대화하며 협력
- 누가 주인이 없어요! (평등)
```

### 캐시 일관성
```
요리사1: "재료 10개 있어!"
요리사2: "아니, 5개야!"

→ 서로 확인이 필요해요! (MESI 프로토콜)
```

**비밀**: 요즘 컴퓨터는 한 칩에 8, 16, 64개의 "작은 요리사"가 있어요! 🧑‍🍳🧑‍🍳🧑‍🍳
