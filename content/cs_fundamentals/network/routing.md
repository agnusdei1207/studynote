+++
title = "ë¼ìš°íŒ… (Routing)"
date = 2025-03-01

[extra]
categories = "cs_fundamentals-network"
+++

# ë¼ìš°íŒ… (Routing)

## í•µì‹¬ ì¸ì‚¬ì´íŠ¸ (3ì¤„ ìš”ì•½)
> **ì¶œë°œì§€ì—ì„œ ëª©ì ì§€ê¹Œì§€ ìµœì  ê²½ë¡œë¥¼ ê²°ì •**í•˜ëŠ” ê³¼ì •. ë¼ìš°íŒ… ì•Œê³ ë¦¬ì¦˜/í”„ë¡œí† ì½œì´ ê²½ë¡œë¥¼ ê³„ì‚°í•˜ê³  ë¼ìš°í„°ê°€ íŒ¨í‚·ì„ ì „ë‹¬í•œë‹¤. ì •ì  ë¼ìš°íŒ…ê³¼ ë™ì  ë¼ìš°íŒ…ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.

## 1. ê°œë…
ë¼ìš°íŒ…ì€ **ë„¤íŠ¸ì›Œí¬ì—ì„œ íŒ¨í‚·ì´ ëª©ì ì§€ê¹Œì§€ ë„ë‹¬í•˜ê¸° ìœ„í•œ ìµœì  ê²½ë¡œë¥¼ ê²°ì •**í•˜ê³ , ê·¸ ê²½ë¡œë¡œ íŒ¨í‚·ì„ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì´ë‹¤.

> ë¹„ìœ : "ë„¤ë¹„ê²Œì´ì…˜" - ëª©ì ì§€ê¹Œì§€ ê°€ìž¥ ë¹ ë¥¸ ê¸¸ì„ ì°¾ì•„ ì•ˆë‚´

## 2. ë¼ìš°íŒ… ê¸°ë³¸ ìš”ì†Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ë¼ìš°íŒ… í…Œì´ë¸”              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ëª©ì ì§€    â”‚  ë‹¤ìŒ í™‰ â”‚  ì¸í„°íŽ˜ì´ìŠ¤â”‚ ë©”íŠ¸ë¦­ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 10.0.1.0 â”‚ 10.0.0.1 â”‚   eth0   â”‚   1   â”‚
â”‚ 10.0.2.0 â”‚ 10.0.0.2 â”‚   eth1   â”‚   2   â”‚
â”‚ 0.0.0.0  â”‚ 10.0.0.1 â”‚   eth0   â”‚   -   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

ìš©ì–´:
- í™‰(Hop): íŒ¨í‚·ì´ ê±°ì¹˜ëŠ” ë¼ìš°í„°
- ë©”íŠ¸ë¦­(Metric): ê²½ë¡œì˜ ë¹„ìš©
- ë‹¤ìŒ í™‰(Next Hop): ë‹¤ìŒ ëª©ì ì§€
```

## 3. ë¼ìš°íŒ… ë¶„ë¥˜

### 3.1 ì •ì  ë¼ìš°íŒ… (Static Routing)
```
ê´€ë¦¬ìžê°€ ìˆ˜ë™ìœ¼ë¡œ ê²½ë¡œ ì„¤ì •

íŠ¹ì§•:
- ê²½ë¡œ ê³ ì •
- ì„¤ì • ë‹¨ìˆœ
- ë³€ê²½ ì‹œ ê´€ë¦¬ìž ê°œìž… í•„ìš”
- ì†Œê·œëª¨ ë„¤íŠ¸ì›Œí¬ì— ì í•©

ì˜ˆì‹œ:
ip route 192.168.2.0 255.255.255.0 192.168.1.1
```

### 3.2 ë™ì  ë¼ìš°íŒ… (Dynamic Routing)
```
ë¼ìš°íŒ… í”„ë¡œí† ì½œì´ ìžë™ìœ¼ë¡œ ê²½ë¡œ ê³„ì‚°

íŠ¹ì§•:
- ê²½ë¡œ ìžë™ ê°±ì‹ 
- ìž¥ì•  ì‹œ ìš°íšŒ ê°€ëŠ¥
- í”„ë¡œí† ì½œ ì˜¤ë²„í—¤ë“œ
- ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬ì— ì í•©
```

## 4. ë¼ìš°íŒ… ì•Œê³ ë¦¬ì¦˜

### 4.1 ê±°ë¦¬ ë²¡í„° (Distance Vector)
```
ê°œë…: ì¸ì ‘ ë¼ìš°í„°ì™€ ê±°ë¦¬ ì •ë³´ êµí™˜

ì•Œê³ ë¦¬ì¦˜: ë²¨ë§Œ-í¬ë“œ (Bellman-Ford)
í”„ë¡œí† ì½œ: RIP, IGRP

ë™ìž‘:
1. ì¸ì ‘ ë¼ìš°í„°ì—ê²Œ ìžì‹ ì˜ ê±°ë¦¬ ë²¡í„° ì „ì†¡
2. ìˆ˜ì‹ í•œ ì •ë³´ë¡œ ìžì‹ ì˜ í…Œì´ë¸” ê°±ì‹ 
3. ë³€í™”ê°€ ìžˆìœ¼ë©´ ë‹¤ì‹œ ì „íŒŒ

íŠ¹ì§•:
- êµ¬í˜„ ë‹¨ìˆœ
- ëŠë¦° ìˆ˜ë ´
- ë£¨í”„ ê°€ëŠ¥ì„± (Count-to-Infinity)
```

### 4.2 ë§í¬ ìƒíƒœ (Link State)
```
ê°œë…: ì „ì²´ ë„¤íŠ¸ì›Œí¬ í† í´ë¡œì§€ íŒŒì•… í›„ ìµœë‹¨ ê²½ë¡œ ê³„ì‚°

ì•Œê³ ë¦¬ì¦˜: ë‹¤ìµìŠ¤íŠ¸ë¼ (Dijkstra's SPF)
í”„ë¡œí† ì½œ: OSPF, IS-IS

ë™ìž‘:
1. ì¸ì ‘ ë§í¬ ìƒíƒœ ì •ë³´ ìˆ˜ì§‘
2. ì „ì²´ ë„¤íŠ¸ì›Œí¬ ë§µ êµ¬ì„±
3. SPFë¡œ ìµœë‹¨ ê²½ë¡œ ê³„ì‚°

íŠ¹ì§•:
- ë¹ ë¥¸ ìˆ˜ë ´
- ë£¨í”„ ë°©ì§€
- ë©”ëª¨ë¦¬/CPU ì‚¬ìš© ë§ŽìŒ
```

### 4.3 ê²½ë¡œ ë²¡í„° (Path Vector)
```
ê°œë…: ê²½ë¡œ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ë£¨í”„ ë°©ì§€

í”„ë¡œí† ì½œ: BGP

ë™ìž‘:
- AS(ìžìœ¨ì‹œìŠ¤í…œ) ê²½ë¡œ ì •ë³´ í¬í•¨
- ê²½ë¡œìƒì˜ AS ëª©ë¡ í™•ì¸
- ë£¨í”„ ê°ì§€ ë° ë°©ì§€

íŠ¹ì§•:
- ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬ìš©
- ì •ì±… ê¸°ë°˜ ë¼ìš°íŒ… ê°€ëŠ¥
```

## 5. ì£¼ìš” ë¼ìš°íŒ… í”„ë¡œí† ì½œ

### 5.1 RIP (Routing Information Protocol)
```
íƒ€ìž…: ê±°ë¦¬ ë²¡í„°
ë©”íŠ¸ë¦­: í™‰ ìˆ˜ (ìµœëŒ€ 15)
ê°±ì‹ : 30ì´ˆë§ˆë‹¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸

íŠ¹ì§•:
- êµ¬í˜„ ê°„ë‹¨
- ì†Œê·œëª¨ìš©
- ëŠë¦° ìˆ˜ë ´
- í™‰ ìˆ˜ ì œí•œ

RIP v2:
- ì„œë¸Œë„· ë§ˆìŠ¤í¬ ì§€ì›
- ë©€í‹°ìºìŠ¤íŠ¸ ì‚¬ìš©
- ì¸ì¦ ì§€ì›
```

### 5.2 OSPF (Open Shortest Path First)
```
íƒ€ìž…: ë§í¬ ìƒíƒœ
ë©”íŠ¸ë¦­: ë¹„ìš© (ëŒ€ì—­í­ ê¸°ë°˜)
ê°±ì‹ : ë³€ê²½ ì‹œ ì¦‰ì‹œ

íŠ¹ì§•:
- ë¹ ë¥¸ ìˆ˜ë ´
- ê³„ì¸µì  êµ¬ì¡° (Area)
- VLSM ì§€ì›
- ì¸ì¦ ì§€ì›

êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Area 0 (Backbone)      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚     â”‚â”€â”€â”€â”€â”€â”‚     â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Area 1     â”‚    Area 2    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚     â”‚    â”‚    â”‚     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 BGP (Border Gateway Protocol)
```
íƒ€ìž…: ê²½ë¡œ ë²¡í„°
ìš©ë„: AS ê°„ ë¼ìš°íŒ… (ì¸í„°ë„·)
ë©”íŠ¸ë¦­: AS-PATH, ì •ì±…

íŠ¹ì§•:
- ì¸í„°ë„·ì˜ í•µì‹¬ í”„ë¡œí† ì½œ
- ì •ì±… ê¸°ë°˜ ê²½ë¡œ ì„ íƒ
- ì‹ ë¢°ì„± ì¤‘ì‹œ
- ëŠë¦° ìˆ˜ë ´

ë™ìž‘:
eBGP: ë‹¤ë¥¸ ASì™€ í†µì‹ 
iBGP: ê°™ì€ AS ë‚´ë¶€ í†µì‹ 
```

## 6. ë¼ìš°íŒ… í”„ë¡œí† ì½œ ë¹„êµ

| í•­ëª© | RIP | OSPF | EIGRP | BGP |
|------|-----|------|-------|-----|
| íƒ€ìž… | ê±°ë¦¬ë²¡í„° | ë§í¬ìƒíƒœ | í•˜ì´ë¸Œë¦¬ë“œ | ê²½ë¡œë²¡í„° |
| ë©”íŠ¸ë¦­ | í™‰ | ë¹„ìš© | ë³µí•© | ASê²½ë¡œ |
| ìˆ˜ë ´ | ëŠë¦¼ | ë¹ ë¦„ | ë§¤ìš°ë¹ ë¦„ | ëŠë¦¼ |
| ê·œëª¨ | ì†Œê·œëª¨ | ì¤‘~ëŒ€ | ì¤‘~ëŒ€ | ì´ˆëŒ€í˜• |
| ê³„ì¸µ | ì—†ìŒ | Area | AS | AS |

## 7. ë¼ìš°íŒ… ê²°ì • ê³¼ì •

```
íŒ¨í‚· ìˆ˜ì‹ 
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ëª©ì ì§€ IP í™•ì¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¼ìš°íŒ… í…Œì´ë¸” ì¡°íšŒâ”‚
â”‚ ìµœìž¥ í”„ë¦¬í”½ìŠ¤ ë§¤ì¹­â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ ë§¤ì¹­ ìžˆìŒ? â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   Yes       No
    â”‚         â”‚
    â†“         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ì „ë‹¬   â”‚ â”‚ê¸°ë³¸ ê²½ë¡œâ”‚
â”‚       â”‚ â”‚ë˜ëŠ” íê¸°â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 8. ì½”ë“œ ì˜ˆì‹œ

```python
import heapq
from collections import defaultdict

class Router:
    """ê°„ë‹¨í•œ ë¼ìš°í„° ì‹œë®¬ë ˆì´ì…˜"""

    def __init__(self, name):
        self.name = name
        self.routing_table = {}  # {ëª©ì ì§€: (ë‹¤ìŒí™‰, ë©”íŠ¸ë¦­)}
        self.neighbors = {}       # {ì´ì›ƒë¼ìš°í„°: ë¹„ìš©}

    def add_neighbor(self, neighbor, cost):
        """ì´ì›ƒ ë¼ìš°í„° ì¶”ê°€"""
        self.neighbors[neighbor] = cost

    def update_routing_table(self, destination, next_hop, metric):
        """ë¼ìš°íŒ… í…Œì´ë¸” ê°±ì‹ """
        self.routing_table[destination] = (next_hop, metric)

    def forward_packet(self, destination):
        """íŒ¨í‚· ì „ë‹¬ ê²°ì •"""
        if destination in self.routing_table:
            next_hop, metric = self.routing_table[destination]
            return f"[{self.name}] â†’ {next_hop} (metric: {metric})"
        elif 'default' in self.routing_table:
            next_hop, _ = self.routing_table['default']
            return f"[{self.name}] â†’ ê¸°ë³¸ ê²½ë¡œ: {next_hop}"
        else:
            return f"[{self.name}] ëª©ì ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"


class Network:
    """ë„¤íŠ¸ì›Œí¬ ì‹œë®¬ë ˆì´ì…˜"""

    def __init__(self):
        self.routers = {}

    def add_router(self, name):
        router = Router(name)
        self.routers[name] = router
        return router

    def connect(self, r1, r2, cost):
        """ë¼ìš°í„° ê°„ ì—°ê²°"""
        self.routers[r1].add_neighbor(r2, cost)
        self.routers[r2].add_neighbor(r1, cost)

    def dijkstra(self, start):
        """ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìµœë‹¨ ê²½ë¡œ ê³„ì‚°"""
        distances = {r: float('inf') for r in self.routers}
        distances[start] = 0
        previous = {r: None for r in self.routers}
        pq = [(0, start)]

        while pq:
            current_dist, current = heapq.heappop(pq)

            if current_dist > distances[current]:
                continue

            for neighbor, cost in self.routers[current].neighbors.items():
                new_dist = current_dist + cost
                if new_dist < distances[neighbor]:
                    distances[neighbor] = new_dist
                    previous[neighbor] = current
                    heapq.heappush(pq, (new_dist, neighbor))

        return distances, previous

    def build_routing_tables(self):
        """ëª¨ë“  ë¼ìš°í„°ì˜ ë¼ìš°íŒ… í…Œì´ë¸” êµ¬ì„±"""
        for router_name in self.routers:
            distances, previous = self.dijkstra(router_name)

            for dest, dist in distances.items():
                if dest != router_name and dist < float('inf'):
                    # ë‹¤ìŒ í™‰ ì°¾ê¸°
                    next_hop = dest
                    curr = dest
                    path = []
                    while previous[curr]:
                        path.append(curr)
                        curr = previous[curr]
                    if path:
                        next_hop = path[-1]

                    self.routers[router_name].update_routing_table(
                        dest, next_hop, dist
                    )


# ë„¤íŠ¸ì›Œí¬ êµ¬ì„± í…ŒìŠ¤íŠ¸
net = Network()

# ë¼ìš°í„° ì¶”ê°€
routers = ['A', 'B', 'C', 'D', 'E']
for r in routers:
    net.add_router(r)

# ì—°ê²° ì„¤ì •
net.connect('A', 'B', 1)
net.connect('A', 'C', 3)
net.connect('B', 'C', 1)
net.connect('B', 'D', 2)
net.connect('C', 'D', 1)
net.connect('D', 'E', 2)

# ë¼ìš°íŒ… í…Œì´ë¸” êµ¬ì„±
net.build_routing_tables()

# ê²°ê³¼ ì¶œë ¥
for name, router in net.routers.items():
    print(f"\n=== ë¼ìš°í„° {name} ë¼ìš°íŒ… í…Œì´ë¸” ===")
    for dest, (next_hop, metric) in router.routing_table.items():
        print(f"  ëª©ì ì§€: {dest} â†’ ë‹¤ìŒí™‰: {next_hop} (ë¹„ìš©: {metric})")

# íŒ¨í‚· ì „ë‹¬ ì‹œë®¬ë ˆì´ì…˜
print("\n=== Aì—ì„œ Eë¡œ íŒ¨í‚· ì „ë‹¬ ===")
result = net.routers['A'].forward_packet('E')
print(result)
```

## 9. ìž¥ë‹¨ì 

### ì •ì  ë¼ìš°íŒ…
| ìž¥ì  | ë‹¨ì  |
|-----|------|
| ë‹¨ìˆœ | ìˆ˜ë™ ê´€ë¦¬ |
| ì˜ˆì¸¡ ê°€ëŠ¥ | í™•ìž¥ì„± ë‚®ìŒ |
| ë¦¬ì†ŒìŠ¤ ì ìŒ | ìž¥ì•  ëŒ€ì‘ ëª»í•¨ |

### ë™ì  ë¼ìš°íŒ…
| ìž¥ì  | ë‹¨ì  |
|-----|------|
| ìžë™ ìž¥ì•  ë³µêµ¬ | ë³µìž¡ë„ ì¦ê°€ |
| í™•ìž¥ì„± | ì˜¤ë²„í—¤ë“œ |
| ìœ ì—°ì„± | ìˆ˜ë ´ ì‹œê°„ |

## 10. ì‹¤ë¬´ì—ì„ ? (ê¸°ìˆ ì‚¬ì  íŒë‹¨)
- **ê¸°ì—…ë§**: OSPFê°€ ì£¼ë¥˜
- **ì¸í„°ë„·**: BGPê°€ í•„ìˆ˜
- **ì†Œê·œëª¨**: ì •ì  ë¼ìš°íŒ… ì¶©ë¶„
- **SDN**: ì¤‘ì•™ ì§‘ì¤‘í˜• ë¼ìš°íŒ…ìœ¼ë¡œ ë³€í™”

## 11. ê´€ë ¨ ê°œë…
- ë¼ìš°í„°
- ì„œë¸Œë„·
- ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´
- AS (Autonomous System)

---

## ì–´ë¦°ì´ë¥¼ ìœ„í•œ ì¢…í•© ì„¤ëª…

**ë¼ìš°íŒ…ì€ "ë„¤ë¹„ê²Œì´ì…˜"ê³¼ ê°™ì•„ìš”!**

```
ì¶œë°œ: ì§‘
ë„ì°©: í•™êµ

ë„¤ë¹„ê°€ ê¸¸ì„ ì°¾ì•„ìš”:
1. ì§ì§„ â†’ 1km
2. ì¢ŒíšŒì „ â†’ 500m
3. ë„ì°©!

ë¼ìš°í„°ë„ ë§ˆì°¬ê°€ì§€ì˜ˆìš”:
1. Aë¼ìš°í„° â†’ Bë¼ìš°í„°
2. Bë¼ìš°í„° â†’ Dë¼ìš°í„°
3. Dë¼ìš°í„° â†’ ë„ì°©!
```

### ê±°ë¦¬ ë²¡í„° ðŸ“
```
ì¹œêµ¬í•œí…Œ ë¬¼ì–´ë´ìš”:
"í•™êµê¹Œì§€ ì–¼ë§ˆë‚˜ ë©€ì–´?"
â†’ "ê±¸ì–´ì„œ 10ë¶„ì´ì•¼!"
```

### ë§í¬ ìƒíƒœ ðŸ—ºï¸
```
ì „ì²´ ì§€ë„ë¥¼ ê°€ì§€ê³  ìžˆì–´ìš”:
- ì´ ê¸¸ì€ ê³µì‚¬ ì¤‘
- ì´ ê¸¸ì´ ì œì¼ ë¹¨ë¼
â†’ ì§€ë„ ë³´ê³  ê¸¸ ì°¾ê¸°!
```

**ë¹„ë°€**: ì¸í„°ë„·ì—ì„œ íŒ¨í‚·ì€ ìˆ˜ë§Žì€ ë¼ìš°í„°ë¥¼ ê±°ì³ì„œ ëª©ì ì§€ì— ë„ì°©í•´ìš”! ðŸŒâœ¨
