+++
title = "ì—ëŸ¬ ì œì–´ (Error Control)"
date = 2025-03-01

[extra]
categories = "cs_fundamentals-network"
+++

# ì—ëŸ¬ ì œì–´ (Error Control)

## í•µì‹¬ ì¸ì‚¬ì´íŠ¸ (3ì¤„ ìš”ì•½)
> ì „ì†¡ ì¤‘ ë°œìƒí•˜ëŠ” **ì˜¤ë¥˜ë¥¼ ê²€ì¶œí•˜ê³  ì •ì •**í•˜ëŠ” ê¸°ìˆ . ì—ëŸ¬ ê²€ì¶œ(ê²€ì‚¬ ì½”ë“œ), ì—ëŸ¬ ì •ì •(ìž¬ì „ì†¡/ì „ì§„), íë¦„ ì œì–´ë¡œ ì‹ ë¢°ì„±ì„ ë³´ìž¥í•œë‹¤. ë°ì´í„° í†µì‹ ì˜ í•µì‹¬ ìš”ì†Œì´ë‹¤.

## 1. ê°œë…
ì—ëŸ¬ ì œì–´ëŠ” **ë°ì´í„° ì „ì†¡ ì¤‘ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ë¥¼ ê²€ì¶œí•˜ê³  ìˆ˜ì •**í•˜ì—¬ ì‹ ë¢°ì„± ìžˆëŠ” í†µì‹ ì„ ë³´ìž¥í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.

> ë¹„ìœ : "íƒë°° ì†¡ìž¥ ë²ˆí˜¸ í™•ì¸" - ë²ˆí˜¸ë¡œ ë¶„ì‹¤/ì˜¤ë°°ì†¡ ê°ì§€

## 2. ì˜¤ë¥˜ì˜ ì¢…ë¥˜

```
1. ë¹„íŠ¸ ì˜¤ë¥˜ (Bit Error)
   0 â†’ 1, 1 â†’ 0 (ë‹¨ì¼ ë¹„íŠ¸)

2. ë²„ìŠ¤íŠ¸ ì˜¤ë¥˜ (Burst Error)
   ì—°ì†ëœ ì—¬ëŸ¬ ë¹„íŠ¸ ì˜¤ë¥˜

3. ë™ê¸° ì˜¤ë¥˜ (Synchronization Error)
   í´ëŸ­ ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ì˜¤ë¥˜

4. ê°ì‡  (Attenuation)
   ì‹ í˜¸ ì„¸ê¸° ê°ì†Œ

5. ìž¡ìŒ (Noise)
   ì™¸ë¶€ ê°„ì„­
```

## 3. ì—ëŸ¬ ì œì–´ ê¸°ë²• ë¶„ë¥˜

```
ì—ëŸ¬ ì œì–´
â”œâ”€â”€ ì—ëŸ¬ ê²€ì¶œ (Error Detection)
â”‚   â”œâ”€â”€ íŒ¨ë¦¬í‹° ê²€ì‚¬
â”‚   â”œâ”€â”€ ì²´í¬ì„¬
â”‚   â”œâ”€â”€ CRC
â”‚   â””â”€â”€ í•´ë° ê±°ë¦¬
â”‚
â”œâ”€â”€ ì—ëŸ¬ ì •ì • (Error Correction)
â”‚   â”œâ”€â”€ í›„ì§„ ì˜¤ë¥˜ ì •ì • (ARQ)
â”‚   â”‚   â”œâ”€â”€ Stop-and-Wait ARQ
â”‚   â”‚   â”œâ”€â”€ Go-Back-N ARQ
â”‚   â”‚   â””â”€â”€ Selective Repeat ARQ
â”‚   â”‚
â”‚   â””â”€â”€ ì „ì§„ ì˜¤ë¥˜ ì •ì • (FEC)
â”‚       â”œâ”€â”€ í•´ë° ì½”ë“œ
â”‚       â”œâ”€â”€ ë¦¬ë“œ-ì†”ë¡œëª¬ ì½”ë“œ
â”‚       â””â”€â”€ ì»¨ë³¼ë£¨ì…˜ ì½”ë“œ
â”‚
â””â”€â”€ íë¦„ ì œì–´ (Flow Control)
    â”œâ”€â”€ ì •ì§€-ëŒ€ê¸°
    â””â”€â”€ ìŠ¬ë¼ì´ë”© ìœˆë„ìš°
```

## 4. ì—ëŸ¬ ê²€ì¶œ ê¸°ë²•

### 4.1 íŒ¨ë¦¬í‹° ê²€ì‚¬ (Parity Check)
```
ê°œë…: 1ì˜ ê°œìˆ˜ë¥¼ ì§ìˆ˜/í™€ìˆ˜ë¡œ ë§žì¶¤

ì§ìˆ˜ íŒ¨ë¦¬í‹° (Even Parity):
ë°ì´í„°: 1010001 (1ì´ 3ê°œ)
íŒ¨ë¦¬í‹° ë¹„íŠ¸: 1 â†’ 1ì´ 4ê°œ (ì§ìˆ˜)
ì „ì†¡: 10100011

ìˆ˜ì‹  ì¸¡:
1ì˜ ê°œìˆ˜ê°€ ì§ìˆ˜ë©´ OK, í™€ìˆ˜ë©´ ì˜¤ë¥˜

ë‹¨ì :
- ì§ìˆ˜ ê°œì˜ ì˜¤ë¥˜ëŠ” ê²€ì¶œ ëª»í•¨
- ì˜¤ë¥˜ ìœ„ì¹˜ ëª¨ë¦„
```

### 4.2 ìˆ˜í‰/ìˆ˜ì§ íŒ¨ë¦¬í‹° (2D Parity)
```
     ë°ì´í„°    íŒ¨ë¦¬í‹°
     1010     0
     1100     1
     0101     1
     â”€â”€â”€â”€â”€    â”€
     0011     0

í–‰ê³¼ ì—´ ëª¨ë‘ íŒ¨ë¦¬í‹° ê²€ì‚¬
â†’ ì˜¤ë¥˜ ìœ„ì¹˜ ì‹ë³„ ê°€ëŠ¥
â†’ 2ë¹„íŠ¸ ì˜¤ë¥˜ ê²€ì¶œ
```

### 4.3 ì²´í¬ì„¬ (Checksum)
```
ê°œë…: ë°ì´í„° í•©ê³„ì˜ ë³´ìˆ˜

ì†¡ì‹ :
1. ë°ì´í„°ë¥¼ 16ë¹„íŠ¸ ë‹¨ìœ„ë¡œ ë¶„í• 
2. ëª¨ë‘ ë”í•¨ (ì˜¤ë²„í”Œë¡œìš°ëŠ” ë‹¤ì‹œ ë”í•¨)
3. 1ì˜ ë³´ìˆ˜ ì·¨í•¨ â†’ ì²´í¬ì„¬
4. ë°ì´í„° + ì²´í¬ì„¬ ì „ì†¡

ìˆ˜ì‹ :
1. ë°›ì€ ëª¨ë“  ê°’ ë”í•¨
2. 1ì˜ ë³´ìˆ˜ ì·¨í•¨
3. 0ì´ë©´ ì˜¤ë¥˜ ì—†ìŒ

ì˜ˆ:
ë°ì´í„°: 10011001 11100010 00100100 10000100
í•©ê³„:   110010010 (ì˜¤ë²„í”Œë¡œìš° 1)
        10010010 + 1 = 10010011
ì²´í¬ì„¬: 01101100
```

### 4.4 CRC (ìˆœí™˜ ì¤‘ë³µ ê²€ì‚¬)
```
ê°œë…: ë‹¤í•­ì‹ ë‚˜ëˆ—ì…ˆ ê¸°ë°˜

ê³¼ì •:
1. ë°ì´í„° ë¹„íŠ¸ì—´ì„ ë‹¤í•­ì‹ìœ¼ë¡œ í‘œí˜„
2. ìƒì„± ë‹¤í•­ì‹(G)ìœ¼ë¡œ ë‚˜ëˆ”
3. ë‚˜ë¨¸ì§€ë¥¼ FCS(Frame Check Sequence)ë¡œ ì¶”ê°€

ìƒì„± ë‹¤í•­ì‹ ì˜ˆ:
CRC-8:    xâ¸ + xÂ² + x + 1
CRC-16:   xÂ¹â¶ + xÂ¹âµ + xÂ² + 1
CRC-32:   xÂ³Â² + xÂ²â¶ + xÂ²Â³ + ... + 1

íŠ¹ì§•:
- ë†’ì€ ê²€ì¶œë¥ 
- í•˜ë“œì›¨ì–´ êµ¬í˜„ ìš©ì´
- ì´ë”ë„·, HDLC ë“±ì—ì„œ ì‚¬ìš©
```

## 5. ì—ëŸ¬ ì •ì • ê¸°ë²•

### 5.1 ARQ (Automatic Repeat reQuest)

#### Stop-and-Wait ARQ
```
ì†¡ì‹                     ìˆ˜ì‹ 
  â”‚                       â”‚
  â”œâ”€â”€â”€[Frame 0]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 0]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                       â”‚
  â”œâ”€â”€â”€[Frame 1]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 1]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                       â”‚

íŠ¹ì§•:
- ë‹¨ìˆœ
- íš¨ìœ¨ ë‚®ìŒ (ëŒ€ê¸° ì‹œê°„)
- 1ë¹„íŠ¸ ìˆœì„œ ë²ˆí˜¸
```

#### Go-Back-N ARQ
```
ì†¡ì‹                     ìˆ˜ì‹ 
  â”‚                       â”‚
  â”œâ”€â”€â”€[F0][F1][F2][F3]â”€â”€â”€â†’â”‚
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 0]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 1]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚       [F2 ì˜¤ë¥˜]        â”‚
  â”‚â†â”€â”€â”€â”€â”€â”€[NAK 2]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                       â”‚
  â”œâ”€â”€â”€[F2][F3][F4][F5]â”€â”€â”€â†’â”‚ (F2ë¶€í„° ìž¬ì „ì†¡)

íŠ¹ì§•:
- ìœˆë„ìš° í¬ê¸°: 2â¿-1
- ìˆ˜ì‹  ì¸¡ ë²„í¼ ë¶ˆí•„ìš”
- ì˜¤ë¥˜ ì‹œ ì „ì²´ ìž¬ì „ì†¡
```

#### Selective Repeat ARQ
```
ì†¡ì‹                     ìˆ˜ì‹ 
  â”‚                       â”‚
  â”œâ”€â”€â”€[F0][F1][F2][F3]â”€â”€â”€â†’â”‚
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 0]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 1]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚       [F2 ì˜¤ë¥˜]        â”‚
  â”‚â†â”€â”€â”€â”€â”€â”€[NAK 2]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚â†â”€â”€â”€â”€â”€â”€[ACK 3]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[F2]â”€â”€â”€â”€â”€â”€â”€â†’â”‚ (F2ë§Œ ìž¬ì „ì†¡)

íŠ¹ì§•:
- ìœˆë„ìš° í¬ê¸°: 2â¿â»Â¹
- ìˆ˜ì‹  ì¸¡ ë²„í¼ í•„ìš”
- ì˜¤ë¥˜ í”„ë ˆìž„ë§Œ ìž¬ì „ì†¡
- íš¨ìœ¨ ë†’ìŒ
```

### 5.2 ì „ì§„ ì˜¤ë¥˜ ì •ì • (FEC)

#### í•´ë° ì½”ë“œ (Hamming Code)
```
ê°œë…: ì˜¤ë¥˜ ê²€ì¶œ + 1ë¹„íŠ¸ ì •ì •

êµ¬ì¡° (7,4 í•´ë°):
ìœ„ì¹˜: 1 2 3 4 5 6 7
      P P D P D D D
      1 2 1 4 2 3 4

P: íŒ¨ë¦¬í‹° ë¹„íŠ¸
D: ë°ì´í„° ë¹„íŠ¸

ê²€ì‚¬:
p1: 1, 3, 5, 7
p2: 2, 3, 6, 7
p4: 4, 5, 6, 7

ì˜¤ë¥˜ ìœ„ì¹˜ = ê²€ì‚¬ ê²°ê³¼ ì´ì§„ìˆ˜
```

#### ë¦¬ë“œ-ì†”ë¡œëª¬ ì½”ë“œ (Reed-Solomon)
```
ê°œë…: ë¸”ë¡ ê¸°ë°˜ ë‹¤ì¤‘ ì˜¤ë¥˜ ì •ì •

íŠ¹ì§•:
- ë²„ìŠ¤íŠ¸ ì˜¤ë¥˜ì— ê°•í•¨
- CD, DVD, QRì½”ë“œì— ì‚¬ìš©
- ìœ„ì„±í†µì‹ , DVB

ë§¤ê°œë³€ìˆ˜:
(n, k) = (255, 223)
- n: ì „ì²´ ì‹¬ë³¼
- k: ë°ì´í„° ì‹¬ë³¼
- ì •ì • ê°€ëŠ¥: (n-k)/2 ì‹¬ë³¼
```

#### ì»¨ë³¼ë£¨ì…˜ ì½”ë“œ (Convolutional Code)
```
ê°œë…: ì—°ì†ì  ë°ì´í„° ìŠ¤íŠ¸ë¦¼ ë¶€í˜¸í™”

íŠ¹ì§•:
- ë©”ëª¨ë¦¬ ìžˆìŒ (ì´ì „ ë¹„íŠ¸ ì˜í–¥)
- ë¹„í„°ë¹„ ì•Œê³ ë¦¬ì¦˜ ë³µí˜¸
- ì´ë™í†µì‹ , ìœ„ì„±í†µì‹ 

ì¸ì½”ë”©:
ìž…ë ¥ â”€â†’[ë©”ëª¨ë¦¬]â”€â†’ ì¶œë ¥1
              â””â”€â†’ ì¶œë ¥2

ë¶€í˜¸í™”ìœ¨: k/n (kìž…ë ¥, nì¶œë ¥)
```

## 6. ARQ vs FEC ë¹„êµ

| í•­ëª© | ARQ | FEC |
|------|-----|-----|
| ë°©ì‹ | ìž¬ì „ì†¡ ìš”ì²­ | ë¯¸ë¦¬ ì •ì • ì½”ë“œ |
| ì§€ì—° | ë³€ë™ | ê³ ì • |
| ëŒ€ì—­í­ | ì •ìƒì‹œ ìž‘ìŒ | í•­ìƒ ì¶”ê°€ |
| ë³µìž¡ë„ | ë‚®ìŒ | ë†’ìŒ |
| ì ìš© | ì¸í„°ë„· | ìœ„ì„±, ë¬´ì„  |

## 7. íë¦„ ì œì–´ (Flow Control)

```
ëª©ì : ìˆ˜ì‹  ì¸¡ ë²„í¼ ì˜¤ë²„í”Œë¡œ ë°©ì§€

Stop-and-Wait:
- 1ê°œ ì „ì†¡ í›„ ACK ëŒ€ê¸°
- íš¨ìœ¨ ë‚®ìŒ

Sliding Window:
- ìœˆë„ìš° í¬ê¸°ë§Œí¼ ì—°ì† ì „ì†¡
- íš¨ìœ¨ ë†’ìŒ

ìœˆë„ìš° í¬ê¸° = min(ì†¡ì‹  ë²„í¼, ìˆ˜ì‹  ë²„í¼, í˜¼ìž¡ ìœˆë„ìš°)
```

## 8. ì½”ë“œ ì˜ˆì‹œ

```python
import random

class ErrorDetection:
    """ì—ëŸ¬ ê²€ì¶œ ì‹œë®¬ë ˆì´ì…˜"""

    @staticmethod
    def parity_check(data, even=True):
        """íŒ¨ë¦¬í‹° ë¹„íŠ¸ ê³„ì‚°"""
        ones = bin(data).count('1')
        parity = ones % 2
        if even:
            return parity
        return 1 - parity

    @staticmethod
    def checksum(data):
        """ì²´í¬ì„¬ ê³„ì‚°"""
        if isinstance(data, int):
            data = data.to_bytes((data.bit_length() + 7) // 8, 'big')
        total = sum(data)
        while total > 0xFF:
            total = (total & 0xFF) + (total >> 8)
        return (~total) & 0xFF

    @staticmethod
    def crc8(data):
        """CRC-8 ê³„ì‚°"""
        if isinstance(data, int):
            data = data.to_bytes((data.bit_length() + 7) // 8, 'big')

        crc = 0
        polynomial = 0x07  # CRC-8 polynomial

        for byte in data:
            crc ^= byte
            for _ in range(8):
                if crc & 0x80:
                    crc = (crc << 1) ^ polynomial
                else:
                    crc <<= 1
                crc &= 0xFF

        return crc


class StopAndWaitARQ:
    """Stop-and-Wait ARQ ì‹œë®¬ë ˆì´ì…˜"""

    def __init__(self, error_rate=0.1):
        self.error_rate = error_rate
        self.sequence = 0

    def send_frame(self, data):
        """í”„ë ˆìž„ ì „ì†¡"""
        frame = {
            'seq': self.sequence,
            'data': data,
            'checksum': ErrorDetection.checksum(data)
        }

        # ì—ëŸ¬ ë°œìƒ ì‹œë®¬ë ˆì´ì…˜
        if random.random() < self.error_rate:
            frame['data'] = data ^ 0xFF  # ë°ì´í„° ë³€ì¡°
            print(f"  [ì „ì†¡ ì˜¤ë¥˜] Frame {self.sequence} ì†ìƒ")
            return None

        return frame

    def receive_frame(self, frame):
        """í”„ë ˆìž„ ìˆ˜ì‹ """
        if frame is None:
            return None

        # ì²´í¬ì„¬ ê²€ì¦
        if ErrorDetection.checksum(frame['data']) != frame['checksum']:
            print(f"  [ìˆ˜ì‹  ì˜¤ë¥˜] ì²´í¬ì„¬ ë¶ˆì¼ì¹˜")
            return {'type': 'NAK', 'seq': frame['seq']}

        return {'type': 'ACK', 'seq': frame['seq']}

    def transmit(self, data_list):
        """ë°ì´í„° ì „ì†¡ ì‹œë®¬ë ˆì´ì…˜"""
        results = []

        for data in data_list:
            print(f"\n=== Frame {self.sequence} ì „ì†¡ ===")

            while True:
                # ì „ì†¡
                frame = self.send_frame(data)

                # ìˆ˜ì‹  (íƒ€ìž„ì•„ì›ƒ ì‹œë®¬ë ˆì´ì…˜)
                if frame is None:
                    print("  [íƒ€ìž„ì•„ì›ƒ] ìž¬ì „ì†¡...")
                    continue

                # ACK/NAK
                response = self.receive_frame(frame)

                if response is None:
                    print("  [ì‘ë‹µ ì—†ìŒ] ìž¬ì „ì†¡...")
                    continue

                if response['type'] == 'ACK':
                    print(f"  [ACK ìˆ˜ì‹ ] Frame {self.sequence} ì™„ë£Œ")
                    self.sequence = 1 - self.sequence  # 0â†”1
                    results.append(data)
                    break
                else:
                    print(f"  [NAK ìˆ˜ì‹ ] ìž¬ì „ì†¡...")

        return results


# í…ŒìŠ¤íŠ¸
data_list = [0x41, 0x42, 0x43, 0x44]  # 'ABCD'
arq = StopAndWaitARQ(error_rate=0.3)
received = arq.transmit(data_list)
print(f"\nìˆ˜ì‹  ì™„ë£Œ: {[chr(d) for d in received]}")
```

## 9. ìž¥ë‹¨ì 

### ARQ
| ìž¥ì  | ë‹¨ì  |
|-----|------|
| ë‹¨ìˆœ êµ¬í˜„ | ì§€ì—° ë³€ë™ |
| ë†’ì€ ì‹ ë¢°ì„± | ìž¬ì „ì†¡ ì˜¤ë²„í—¤ë“œ |
| ì ì€ ëŒ€ì—­í­ | ì™•ë³µ ì‹œê°„ ì˜ì¡´ |

### FEC
| ìž¥ì  | ë‹¨ì  |
|-----|------|
| ê³ ì • ì§€ì—° | í•­ìƒ ì˜¤ë²„í—¤ë“œ |
| ìž¬ì „ì†¡ ë¶ˆí•„ìš” | ë³µìž¡í•œ êµ¬í˜„ |
| ë‹¨ë°©í–¥ ê°€ëŠ¥ | ì •ì • ëŠ¥ë ¥ ì œí•œ |

## 10. ì‹¤ë¬´ì—ì„ ? (ê¸°ìˆ ì‚¬ì  íŒë‹¨)
- **TCP**: ARQ ê¸°ë°˜ (ACK, ìž¬ì „ì†¡)
- **ë¬´ì„  í†µì‹ **: FEC + ARQ í•˜ì´ë¸Œë¦¬ë“œ
- **ìœ„ì„±**: FEC í•„ìˆ˜ (ì™•ë³µ ì§€ì—° í¼)
- **ìŠ¤íŠ¸ë¦¬ë°**: FEC ìš°ì„  (ì§€ì—° ë¯¼ê°)

## 11. ê´€ë ¨ ê°œë…
- ì²´í¬ì„¬
- CRC
- íë¦„ ì œì–´
- í˜¼ìž¡ ì œì–´

---

## ì–´ë¦°ì´ë¥¼ ìœ„í•œ ì¢…í•© ì„¤ëª…

**ì—ëŸ¬ ì œì–´ëŠ” "ìˆ«ìž ë§žì¶”ê¸° ê²Œìž„"ê³¼ ê°™ì•„ìš”!**

### ì—ëŸ¬ ê²€ì¶œ ðŸ”
```
ì„ ìƒë‹˜ì´ ë§í•´ìš”:
"1, 2, 3, 4, 5, 7ì´ì•¼" â†’ 6ì´ ì—†ë„¤? ì˜¤ë¥˜!

ì²´í¬ì„¬ = ëª¨ë‘ ë”í•œ ê°’
íŒ¨ë¦¬í‹° = ì§ìˆ˜/í™€ìˆ˜ ë§žì¶”ê¸°
```

### ARQ (ë‹¤ì‹œ ë§í•´ì¤˜!) ðŸ“¢
```
ì¹œêµ¬í•œí…Œ ë§í•´ìš”:
"ì•ˆë…•!"
â†’ ëª» ë“¤ì—ˆì–´, ë‹¤ì‹œ ë§í•´ì¤˜!
"ì•ˆë…•!"
â†’ ì‘, ë“¤ì—ˆì–´!
```

### FEC (ížŒíŠ¸ ë¯¸ë¦¬ ì£¼ê¸°) ðŸ’¡
```
ë¹„ë°€ë²ˆí˜¸: 1234
ížŒíŠ¸: 1+2+3+4=10

í•˜ë‚˜ê°€ í‹€ë ¤ë„:
1235 â†’ 1+2+3+5=11 â‰  10
â†’ 5ê°€ ì•„ë‹ˆë¼ 4ì˜€êµ¬ë‚˜!
```

**ë¹„ë°€**: ì—ëŸ¬ ì œì–´ ë•ë¶„ì— ì¸í„°ë„· íŒŒì¼ì´ ê¹¨ì§€ì§€ ì•Šì•„ìš”! ðŸ’¾âœ¨
