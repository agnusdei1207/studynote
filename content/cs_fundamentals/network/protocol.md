+++
title = "프로토콜 (Protocol)"
date = 2025-03-01

[extra]
categories = "cs_fundamentals-network"
+++

# 프로토콜 (Protocol)

## 핵심 인사이트 (3줄 요약)
> 네트워크 통신을 위한 **규칙과 약속의 집합**. 통신 주체 간 데이터 교환 방식, 형식, 순서를 정의한다. 프로토콜이 있어서 다른 시스템 간에도 통신이 가능하다.

## 1. 개념
프로토콜은 **통신 시스템 간 데이터 교환을 위한 표준화된 규칙**으로, 구문(Syntax), 의미(Semantics), 타이밍(Timing)의 3요소로 구성된다.

> 비유: "교통 신호등" - 빨강/초록의 의미가 약속되어 있어야 사고 없이 이동 가능

## 2. 프로토콜 3요소

| 요소 | 설명 | 예시 |
|------|------|------|
| 구문 (Syntax) | 데이터 형식, 부호화 | 헤더 구조, 필드 크기 |
| 의미 (Semantics) | 각 필드의 의미 | 오류 제어, 제어 정보 |
| 타이밍 (Timing) | 전송 순서, 속도 | 동기화, 타임아웃 |

## 3. 프로토콜 계층 구조

```
┌─────────────────────────────────┐
│       응용 계층 프로토콜        │
│  HTTP, FTP, SMTP, DNS, SSH      │
├─────────────────────────────────┤
│       전송 계층 프로토콜        │
│         TCP, UDP, SCTP          │
├─────────────────────────────────┤
│       인터넷 계층 프로토콜      │
│    IP, ICMP, IGMP, ARP, OSPF    │
├─────────────────────────────────┤
│       네트워크 접근 프로토콜    │
│     Ethernet, WiFi, PPP         │
└─────────────────────────────────┘
```

## 4. 주요 프로토콜 상세

### 4.1 응용 계층

| 프로토콜 | 포트 | 용도 | 특징 |
|----------|------|------|------|
| HTTP | 80 | 웹 서비스 | 비연결형, 무상태 |
| HTTPS | 443 | 보안 웹 | SSL/TLS 암호화 |
| FTP | 20/21 | 파일 전송 | 제어/데이터 분리 |
| SMTP | 25 | 메일 송신 | 텍스트 기반 |
| POP3 | 110 | 메일 수신 | 다운로드 후 삭제 |
| IMAP | 143 | 메일 수신 | 서버 동기화 |
| DNS | 53 | 도메인 해석 | 계층적 구조 |
| SSH | 22 | 원격 접속 | 암호화 |
| DHCP | 67/68 | IP 자동 할당 | DORA 과정 |

### 4.2 전송 계층

#### TCP (Transmission Control Protocol)
```
특징:
- 연결형 서비스 (3-way handshake)
- 신뢰성 보장 (ACK, 재전송)
- 순서 보장 (시퀀스 번호)
- 흐름 제어 (슬라이딩 윈도우)
- 혼잡 제어

헤더 구조:
┌────────────────────────────────────┐
│ Source Port │ Destination Port    │
├────────────────────────────────────┤
│ Sequence Number                    │
├────────────────────────────────────┤
│ Acknowledgment Number              │
├────────────────────────────────────┤
│ Flags │ Window Size │ Checksum    │
└────────────────────────────────────┘
```

#### UDP (User Datagram Protocol)
```
특징:
- 비연결형 서비스
- 신뢰성 없음 (최선형)
- 빠른 전송
- 멀티캐스트 지원

용도: 실시간 스트리밍, DNS, 게임
```

### 4.3 인터넷 계층

| 프로토콜 | 용도 |
|----------|------|
| IPv4 | 32비트 주소 체계 |
| IPv6 | 128비트 주소 체계 |
| ICMP | 오류 메시지, 진단 |
| ARP | IP → MAC 변환 |
| RARP | MAC → IP 변환 |
| OSPF | 동적 라우팅 |

## 5. 프로토콜 슈트 (Suite)

### TCP/IP 프로토콜 슈트
```
┌───────────────────────────────────┐
│         Application Layer         │
│  HTTP  FTP  SMTP  DNS  Telnet     │
├───────────────────────────────────┤
│          Transport Layer          │
│           TCP        UDP          │
├───────────────────────────────────┤
│           Internet Layer          │
│  IP  ICMP  IGMP  ARP  Routing     │
├───────────────────────────────────┤
│        Network Access Layer       │
│  Ethernet  WiFi  PPP  Token Ring  │
└───────────────────────────────────┘
```

## 6. 프로토콜 설계 원칙

### 6.1 기본 원칙
- **단순성**: 구현이 쉬워야 함
- **확장성**: 새로운 기능 추가 가능
- **효율성**: 리소스 최소화
- **상호 운용성**: 다른 시스템과 호환

### 6.2 End-to-End 원칙
```
- 지능은 끝단(End)에 위치
- 네트워크는 단순한 전달만
- 신뢰성은 종단에서 보장
```

## 7. 프로토콜 분류

| 분류 기준 | 종류 | 예시 |
|----------|------|------|
| 연결 방식 | 연결형/비연결형 | TCP/UDP |
| 신뢰성 | 신뢰성/비신뢰성 | TCP/UDP |
| 전송 방식 | 유니캐스트/멀티캐스트/브로드캐스트 | IP/IGMP |
| 계층 | 응용/전송/네트워크/링크 | HTTP/TCP/IP/Ethernet |

## 8. 장단점

### 표준화의 장점
| 장점 | 설명 |
|-----|------|
| 상호 운용성 | 다른 시스템 간 통신 가능 |
| 개발 용이성 | 명세에 따라 구현 |
| 확장성 | 새로운 기능 추가 |
| 호환성 | 장비 교체 용이 |

### 복잡성의 단점
| 단점 | 설명 |
|-----|------|
| 오버헤드 | 헤더/제어 정보 증가 |
| 복잡성 | 다양한 프로토콜 이해 필요 |
| 성능 이슈 | 계층 통과 비용 |

## 9. 코드 예시

```python
import socket

# TCP 클라이언트 예시
def tcp_client():
    # 소켓 생성 (IPv4, TCP)
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    # 3-way handshake (연결)
    client.connect(('example.com', 80))

    # HTTP 요청 송신
    request = b"GET / HTTP/1.1\r\nHost: example.com\r\n\r\n"
    client.send(request)

    # 응답 수신
    response = client.recv(4096)
    print(response.decode())

    # 연결 종료
    client.close()

# UDP 클라이언트 예시
def udp_client():
    # 소켓 생성 (IPv4, UDP)
    client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    # 비연결형 전송
    message = b"Hello UDP"
    client.sendto(message, ('example.com', 12345))

    # 응답 수신 (선택적)
    data, addr = client.recvfrom(1024)
    print(f"Received: {data}")

    client.close()
```

## 10. 실무에선? (기술사적 판단)
- **프로토콜 선택**: 용도에 맞는 프로토콜 선택 (TCP vs UDP)
- **포트 관리**: 방화벽 규칙, 포트 충돌 방지
- **프로토콜 분석**: Wireshark로 패킷 캡처 분석
- **최적화**: Keep-alive, Nagle 알고리즘 설정

## 11. 관련 개념
- OSI 7계층
- 캡슐화/역캡슐화
- 포트 (Port)
- 소켓 (Socket)

---

## 어린이를 위한 종합 설명

**프로토콜은 "통신 약속"이에요!**

```
📞 전화 예절:
1. "여보세요?" (연결 확인)
2. "누구세요?" (신원 확인)
3. 대화 (데이터 교환)
4. "끊을게요" (연결 종료)

이것도 프로토콜이에요!
```

**TCP는 "확인 전화"** 📱
- "받았어?" "응!" 하고 확인해요

**UDP는 "돌려말하기"** 📢
- 그냥 말하고 답 안 기다려요

**비밀**: 인터넷은 수많은 프로토콜이 함께 일해요! 🌐✨
