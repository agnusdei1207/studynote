# 자료구조: 힙 (Heap Data Structure)

## 📌 개요

**힙(Heap)**은 **완전 이진 트리(CBT, Complete Binary Tree)**를 기반으로 하는 자료구조로, 최댓값이나 최솟값을 빠르게 찾아내기 위해 고안되었다. 여러 개의 값들 중에서 가장 크거나 작은 값을 우선적으로 처리해야 하는 **우선순위 큐(Priority Queue)**를 구현하는 데 가장 효율적인 자료구조다.

---

## 1. 주요 특징

### 1.1 완전 이진 트리 (CBT, Complete Binary Tree)
힙은 항상 완전 이진 트리의 형태를 유지한다.
- 마지막 레벨을 제외한 모든 레벨이 완전히 채워져 있어야 한다.
- 마지막 레벨은 왼쪽부터 차례대로 채워져야 한다.

### 1.2 힙 속성 (Heap Property)
부모 노드와 자식 노드 간에 일정한 대소 관계가 성립한다.
- **최대 힙 (Max Heap)**: 부모 노드의 키값이 자식 노드의 키값보다 크거나 같다. (루트 노드가 최댓값)
- **최소 힙 (Min Heap)**: 부모 노드의 키값이 자식 노드의 키값보다 작거나 같다. (루트 노드가 최솟값)

### 1.3 느슨한 정렬 (Semi-ordered)
힙은 이진 탐색 트리(BST, Binary Search Tree)처럼 완전히 정렬된 상태가 아니다. 상위 레벨이 하위 레벨보다 크거나 작다는 조건만 만족할 뿐, 같은 레벨 내에서의 정렬 순서는 보장되지 않는다.

---

## 2. 힙의 종류

| 종류 | 특징 | 용도 |
| :--- | :--- | :--- |
| **최대 힙 (Max Heap)** | `부모 노드 ≥ 자식 노드` | 내림차순 정렬, 최댓값 우선 처리 |
| **최소 힙 (Min Heap)** | `부모 노드 ≤ 자식 노드` | 오름차순 정렬, 최솟값 우선 처리, 최단 경로 알고리즘 |

---

## 3. 힙의 표현 (Array Representation)

힙은 완전 이진 트리이므로 배열을 사용하여 매우 효율적으로 구현할 수 있다. (인덱스 1부터 시작하는 경우 기준)

- **Root Node Index**: 1
- **Parent Index**: `Index // 2`
- **Left Child Index**: `Index * 2`
- **Right Child Index**: `Index * 2 + 1`

> 💡 **배열 사용의 장점**: 포인터를 사용하지 않아 메모리를 절약할 수 있으며, 인덱스 계산만으로 부모/자식 노드에 즉각 접근할 수 있다.

---

## 4. 힙의 핵심 연산

### 4.1 삽입 (Insertion / Up-Heap / Bubble-Up)
1. 새로운 요소를 마지막 위치(배열의 끝)에 추가한다.
2. 부모 노드와 비교하며 힙 속성을 만족할 때까지 위로 올린다. (**Heapify-up**)

### 4.2 삭제 (Deletion / Down-Heap / Sift-Down)
보통 루트 노드(최댓값 혹은 최솟값)를 삭제한다.
1. 루트 노드를 제거하고, 마지막 노드를 루트 위치로 옮긴다.
2. 자식 노드들 중 더 큰(또는 작은) 자식과 비교하며 아래로 내린다. (**Heapify-down**)

---

## 5. 복잡도 분석

| 연산 | 시간 복잡도 | 이유 |
| :--- | :--- | :--- |
| **삽입 (Insert)** | **O(log N)** | 트리의 높이만큼(log N) 비교 및 변경 발생 |
| **삭제 (Delete)** | **O(log N)** | 트리의 높이만큼(log N) 비교 및 변경 발생 |
| **최대/최소 조회 (Peek)** | **O(1)** | 루트 노드값만 확인하면 됨 |
| **힙 구성 (Build Heap)** | **O(N)** | 상향식(Bottom-up) 방식을 사용하면 선형 시간에 가능 |

---

## 6. 비유로 이해하기

> 🏢 **응급실(Emergency Room) 대기 순서**
>
> 일반적인 큐가 "먼저 온 사람이 먼저 진료받는(FIFO, First-In First-Out)" 시스템이라면, **힙은 응급실의 진료 순서**와 같다.
> - 환자가 올 때마다 위급도(우선순위)에 따라 순서가 재조정된다.
> - 가장 위급한 환자(루트 노드)가 가장 먼저 진료를 받는다.
> - 환자가 새로 오거나(삽입), 한 명이 진료실로 들어가면(삭제), 나머지 환자들은 다시 위급도 순으로 자리(힙 속성 유지)를 잡는다.

---

## 7. 주요 활용 사례

### 7.1 우선순위 큐 (Priority Queue)
가장 높은(혹은 낮은) 우선순위를 가진 항목을 먼저 꺼내야 하는 작업 예약 시스템, 네트워크 트래픽 제어 등에 사용된다.

### 7.2 힙 정렬 (Heap Sort)
힙 자료구조를 이용하여 데이터를 정렬하는 방식이다.
- 불안정 정렬(Unstable Sort)이지만, 시간 복잡도가 항상 **O(N log N)**임을 보장한다.

### 7.3 최단 경로 알고리즘 (Dijkstra Algorithm)
다익스트라(Dijkstra) 알고리즘에서 다음 방문할 가장 가까운 노드를 찾을 때 **최소 힙(Min Heap)**을 사용하여 성능을 최적화한다.

---

## 8. 힙 vs 이진 탐색 트리 (BST)

| 특징 | 힙 (Heap) | 이진 탐색 트리 (BST) |
| :--- | :--- | :--- |
| **정렬 정도** | 느슨한 정렬 (부모-자식 관계만) | 완전 정렬 (좌측 < 부모 < 우측) |
| **목적** | 최댓값/최솟값 검색 | 모든 데이터의 탐색, 삽입, 삭제 |
| **검색 속도** | 특정 값 탐색 시 **O(N)** | 특정 값 탐색 시 평균 **O(log N)** |
| **구조** | 반드시 완전 이진 트리 | 균형을 맞춰야 함 (AVL, Red-Black) |

---

## 9. 정리

**힙(Heap)**은 데이터의 추가와 최댓값/최솟값의 삭제가 빈번하게 일어나는 환경에서 최고의 효율을 발휘하는 자료구조다. 특히 **O(log N)**이라는 안정적인 성능과 배열을 통한 간결한 구현 덕분에 알고리즘 문제 해결뿐만 아니라 운영체제(Operating System)의 스케줄러 등 실무에서도 폭넓게 활용된다.

---

## 📚 참고 용어 (Full Forms)

- **CBT**: Complete Binary Tree (완전 이진 트리)
- **BST**: Binary Search Tree (이진 탐색 트리)
- **FIFO**: First-In First-Out (선입 선출)
- **AVL**: Adelson-Velsky and Landis (최초의 자가 균형 이진 탐색 트리)
- **OS**: Operating System (운영체제)
