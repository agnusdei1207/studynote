# 위상 정렬 (Topological Sort)

## I. 선후 관계의 체계적 나열, 위상 정렬의 개요

### 가. 위상 정렬 (Topological Sort)의 정의
- 사이클이 없는 방향 그래프(DAG, Directed Acyclic Graph)에서 모든 정점을 선후 관계를 위배하지 않도록 순서대로 나열하는 알고리즘입니다.

### 나. 위상 정렬의 특징 및 전제 조건
1. **DAG 전제**: 그래프 내에 순환(Cycle)이 존재하면 시작점을 찾을 수 없으므로 반드시 **DAG**여야 합니다.
2. **복수 해 존재 가능**: 한 그래프에 여러 가지 위상 정렬 결과가 존재할 수 있습니다.
3. **선형 순서**: 모든 간선 $(u, v)$에 대해 $u$가 $v$보다 앞에 위치하는 논리적 순서를 보장합니다.

---

## II. 위상 정렬의 핵심 매커니즘: 칸 알고리즘 (Kahn's Algorithm)

### 가. 핵심 구성 요소
| 구성 요소 | 설명 | 비고 |
| :--- | :--- | :--- |
| **진입차수 (In-degree)** | 특정 노드로 들어오는 간선의 개수 | 결정적 기준 지표 |
| **큐 (Queue)** | 진입차수가 0인 노드를 관리하는 자료구조 | BFS 방식 탐색 |
| **DAG** | 사이클이 없는 방향 그래프 | 위상 정렬의 필수 조건 |

### 나. 동작 단계 (Process)
1. **초기화**: 모든 노드의 진입차수를 계산하고, 진입차수가 **0**인 노드를 큐에 삽입합니다.
2. **노드 추출 및 삭제**: 큐에서 노드를 꺼내 정렬 결과에 추가하고, 해당 노드에서 나가는 모든 간선을 그래프에서 제거합니다.
3. **진입차수 갱신**: 간선 제거로 인해 새롭게 진입차수가 0이 된 인접 노드들을 큐에 삽입합니다.
4. **반복 및 검증**: 큐가 빌 때까지 반복하며, 모든 노드를 방문하지 못하고 큐가 비었다면 **사이클(Cycle)**이 존재하는 것으로 판단합니다.

---

## III. 위상 정렬의 알고리즘 비교 및 복잡도 분석

### 가. 구현 방식별 비교
| 비교 항목 | 칸 알고리즘 (Kahn's) | DFS 기반 방식 |
| :--- | :--- | :--- |
| **탐색 기법** | BFS (Breadth-First Search) | DFS (Depth-First Search) |
| **자료 구조** | 큐 (Queue) | 재귀(Stack) / 역순 정렬 |
| **사이클 감지** | 노드 방문 횟수로 감지 가능 | 역방향 간선(Back Edge)으로 확인 |
| **특징** | 직관적이며 구현이 용이함 | 위상 정렬의 원론적 접근 |

### 나. 시간 복잡도
- **$O(V + E)$**: 모든 정점($V$)을 한 번씩 방문하고, 모든 간선($E$)을 한 번씩 제거하므로 인접 리스트 구현 시 효율적인 탐색이 가능합니다.

---

## IV. 활용 사례 및 기술사적 판단

### 가. 현실 세계의 활용 분야
1. **작업 스케줄링**: 프로젝트의 태스크 간의 의존 관계가 있을 때 수행 순서 결정.
2. **빌드 시스템 (Build System)**: 소스 파일 간의 의존성을 분석하여 컴파일 순서 결정 (예: Makefile, Gradle).
3. **교육과정 이수**: 선수 과목이 체계적으로 구성된 대학 커리큘럼의 이수 경로 탐색.
4. **패키지 매니저**: 라이브러리 설치 시 의존 패키지들의 우선 설치 순서 산출.

### 나. 기술적 제언 및 향후 전망
- **사이클 감지의 중요성**: 실무에서 위상 정렬 실패는 대개 순환 의존성(Circular Dependency) 문제이며, 이를 시스템적으로 탐지하고 사용자에게 피드백을 주는 것이 중요합니다.
- **분산 환경으로의 확장**: 대규모 데이터 처리 인프라(Spark, Airflow)에서는 DAG 기반의 위상 정렬을 분산 클러스터 상에서 효율적으로 스케줄링하는 기법이 지속적으로 고도화되고 있습니다.

---

## [부록] 어린이 버전 설명 (비유로 배우기)

### "떡볶이 만들기 대작전" 비유
1. **순서가 있는 일들**: 떡볶이를 만들려면 '떡 씻기', '물 끓이기', '고추장 풀기', '떡 넣기' 같은 여러 일이 있어요.
2. **먼저 해야 할 일**: '떡 씻기'를 안 하고 '떡 넣기'를 할 수는 없겠죠? (이걸 '선후 관계'라고 해요)
3. **진입차수 0 찾기**: 지금 당장 할 수 있는 일(앞에 기다려야 할 일이 없는 것)을 먼저 찾아요. '떡 씻기'와 '물 끓이기'가 되겠네요!
4. **하나씩 해치우기**: 일을 하나 끝내면(정점 제거), 그 일 때문에 기다리던 다음 일들이 "이제 내 차례인가?" 하고 준비해요.
5. **완성**: 모든 일을 순서대로 다 끝내면 맛있는 떡볶이가 완성된답니다!

**💡 한 줄 요약**: "먼저 할 일부터 차례차례 끝내서 복잡한 일을 완벽한 순서로 정리하는 비법!"
