{% extends "base.html" %}

{% block content %}
<div class="post-header">
    <a href="javascript:history.back()" class="post-back">
        {% include "icons/chevron-left.html" %}
        Back
    </a>
    <div class="pc-meta">
        {% if page.date %}
        <span>{{ page.date | date(format="%B %d, %Y") }}</span>
        {% if page.extra.categories %}
        <span style="opacity: 0.5;">•</span>
        <span>{{ page.extra.categories | replace(from="-", to=" ") }}</span>
        {% endif %}
        <span style="opacity: 0.5;">•</span>
        <button class="copy-btn" onclick="copyDetail()" title="Copy all content">
            {% include "icons/copy.html" %}
            {% include "icons/check.html" %}
            <span class="copy-text">Copy</span>
        </button>
        {% endif %}
    </div>
</div>

<article class="post-content">
    {{ page.content | safe }}
</article>

<script>
    function copyDetail() {
        var article = document.querySelector('.post-content');
        var text = article.innerText || article.textContent;
        navigator.clipboard.writeText(text).then(function () {
            var btn = document.querySelector('.copy-btn:last-child');
            if (btn) btn.classList.add('copied');
            var textSpan = btn.querySelector('.copy-text');
            textSpan.textContent = 'Copied!';
            setTimeout(function () {
                textSpan.textContent = 'Copy';
                btn.classList.remove('copied');
            }, 2000);
        });
    }
</script>
{% endblock content %}