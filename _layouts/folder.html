---
layout: default
---

{% comment %} Auto-generate breadcrumb {% endcomment %}
<div class="breadcrumb">
    <a href="{{ '/' | relative_url }}">root</a>
    {% assign parts = page.url | split: '/' %}
    {% assign cur = '' %}
    {% assign total = 0 %}
    {% for part in parts %}
    {% if part != '' %}
    {% assign total = total | plus: 1 %}
    {% endif %}
    {% endfor %}
    {% assign index = 0 %}
    {% for part in parts %}
    {% if part != '' %}
    {% assign cur = cur | append: '/' | append: part %}
    {% assign index = index | plus: 1 %}
    <span class="breadcrumb-sep">/</span>
    {% if index == total %}
    <span class="breadcrumb-current">{{ part | replace: '_', ' ' }}</span>
    {% else %}
    <a href="{{ cur | relative_url }}">{{ part | replace: '_', ' ' }}</a>
    {% endif %}
    {% endif %}
    {% endfor %}
</div>

{% if page.title and page.title != '' %}
<h1 style="font-size:1.5rem; font-weight:700; margin-bottom:24px;">{{ page.title }}</h1>
{% endif %}

{% if page.description %}
<p style="color:var(--fg-muted); margin-bottom:24px; font-size:0.9rem;">{{ page.description }}</p>
{% endif %}

<div class="folder-list">
    {% assign cur_url = page.url | append: '/' | replace: '//', '/' %}

    {% comment %} Sub-directories {% endcomment %}
    {% for p in site.html_pages %}
    {% assign p_url = p.url | append: '/' | replace: '//', '/' %}
    {% if p_url contains cur_url and p.url != page.url %}
    {% assign rel = p_url | replace: cur_url, '' %}
    {% assign parts = rel | split: '/' %}
    {% if parts.size == 1 %}
    <a class="folder-item" href="{{ p.url | relative_url }}">
        <span class="fi-icon">üìÅ</span>
        <span class="fi-name">{{ p.title | default: parts[0] }}</span>
        <span class="fi-meta">directory</span>
    </a>
    {% endif %}
    {% endif %}
    {% endfor %}

    {% comment %} Files at same depth {% endcomment %}
    {% for p in site.html_pages %}
    {% if p.url contains page.url and p.url != page.url %}
    {% assign p_parts = p.url | split: '/' %}
    {% assign page_parts = page.url | split: '/' %}
    {% if p_parts.size == page_parts.size %}
    <div class="folder-item-wrapper">
        <a class="folder-item" href="{{ p.url | relative_url }}">
            <span class="fi-icon">üìÑ</span>
            <span class="fi-name">{{ p.title | default: p.name }}</span>
            <span class="fi-meta">{{ p.date | date: '%Y-%m-%d' }}</span>
        </a>
        <button class="card-copy-btn" data-url="{{ p.url | relative_url }}" title="Copy content">
            {% include icons/copy.html %}
            {% include icons/check.html %}
        </button>
    </div>
    {% endif %}
    {% endif %}
    {% endfor %}

    {% comment %} Posts in this folder (using original_path) {% endcomment %}
    {% assign folder_path = page.url | remove_first: '/' | remove: '/' %}
    {% for post in site.posts %}
    {% assign post_path = post.original_path | replace: '/', '' %}
    {% if post_path == folder_path %}
    <div class="folder-item-wrapper">
        <a class="folder-item" href="{{ post.url | relative_url }}">
            <span class="fi-icon">üìÑ</span>
            <span class="fi-name">{{ post.title | default: post.name }}</span>
            <span class="fi-meta">{{ post.date | date: '%Y-%m-%d' }}</span>
        </a>
        <button class="card-copy-btn" data-url="{{ post.url | relative_url }}" title="Copy content">
            {% include icons/copy.html %}
            {% include icons/check.html %}
        </button>
    </div>
    {% endif %}
    {% endfor %}
</div>

<script>
document.querySelectorAll('.card-copy-btn').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        var url = this.dataset.url;
        var btnEl = this;
        fetch(url)
            .then(function(res) { return res.text(); })
            .then(function(html) {
                var parser = new DOMParser();
                var doc = parser.parseFromString(html, 'text/html');
                var content = doc.querySelector('.post-content');
                if (content) {
                    var text = content.innerText || content.textContent;
                    navigator.clipboard.writeText(text).then(function() {
                        btnEl.classList.add('copied');
                        setTimeout(function() { btnEl.classList.remove('copied'); }, 2000);
                    });
                }
            });
    });
});
</script>